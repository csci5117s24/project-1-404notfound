{%extends 'base.html' %}

{%block content%}
<div class="art-container" id="gridContainer">
    <div class="art-item">
        <div class="image-container">
            <div class="heart-box">
                <div class="heart-icon unliked" onclick="toggleHeart(this)">â™¥</div>
            </div>
            <img src="{{ image_details.image_url }}" alt="{{ image_details.title }}" class="art-image">
        </div>
        <div class="art-info">
            <a href="/users/{{image_details.user_id}}", class = "profile_link">
                <img src="{{ author_details.profile_pic_url }}" alt="{{ author_details.user_name }}" class="art-user">
                <p class="art-description">Author: {{ author_details.user_name }}</p>
            </a>
            <div class="art-title">{{ image_details.title }}</div>
            <p class="art-description">{{ image_details.description }}</p>
            <p class="art-description">{{ image_details.prompt }}</p>
            <div class="comments-section">
                {% if session %}
                <form action = "{{url_for('comments')}}" method="POST" id="commentForm" enctype="multipart/form-data">
                    <input type="hidden" name="image_id" value="{{ image_details.image_id }}">
                    <input type="text" id="comment" name="comment" placeholder="Add a comment..." class="comment-input">
                    <button type="submit" class="comment-submit">Post</button>
                </form>
                {% endif %}
                <div class="comments-list-container"> <!-- Container for the comments list -->
                    <ul class="comments-list">
                        {% for comment in comments %}
                            <li class="comment">User{{ comment.user_id }}: {{ comment.comment }}</li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    function toggleHeart(element) {
        element.classList.toggle('liked');
        element.classList.toggle('unliked');
    }
</script>


{%endblock%}